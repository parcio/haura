#!/bin/bash

echo "Starting allocator benchmarks for different SEGMENT_SIZE_LOG_2 values..."

for seg_log_2 in {14..23}; do
    feature_name="seg_log_2_${seg_log_2}"

    echo "Running benchmark with SEGMENT_SIZE_LOG_2 = ${seg_log_2} (Feature: ${feature_name})"

    cargo bench --features "${feature_name}" > /dev/null 2>&1 -- allocator
done

echo "All benchmarks completed. Results are in the 'target/criterion' directory."


